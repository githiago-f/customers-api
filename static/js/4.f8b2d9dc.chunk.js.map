{"version":3,"sources":["api/config.ts","api/customers-api.ts","components/BackArrow/index.tsx","api/utils-api.ts","pages/create-customer.tsx","hooks/create-customer.tsx"],"names":["portfolioApi","Axios","create","baseURL","customersGroupedByCity","a","get","data","customerById","customerId","customersByCity","city_id","page","params","city","console","log","createCustomer","customer","post","status","updateCustomer","patch","BackArrow","to","className","getAllCities","getAllCompanies","CreateCustomer","useState","cities","setCities","companies","setCompanies","company","setCustomer","error","setError","alterField","useCallback","e","draft","target","name","value","useEffect","Promise","all","then","catch","preventDefault","window","location","href","test","message","useCreateCustomer","action","method","onSubmit","data-testid","htmlFor","type","id","defaultValue","first_name","onChange","last_name","email","map","i","titulation","hidden","onClick"],"mappings":"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","file":"static/js/4.f8b2d9dc.chunk.js","sourcesContent":["import Axios from 'axios';\n\nexport const portfolioApi = Axios.create({\n  baseURL: 'http://localhost:8080'\n});\n","import { Customer, CustomerDTO, CustomersInCity } from 'portfolio-domain';\nimport { portfolioApi } from './config';\n\nexport const customersGroupedByCity = async () => {\n  const {data} = await portfolioApi.get<CustomersInCity[]>('/customer/groupByCity');\n  return data;\n};\nexport const customerById = async (customerId: string) => {\n  const {data} = await portfolioApi.get<Customer>('/customer/'+customerId);\n  return data;\n};\n\nexport const customersByCity = async (city_id: string, page = 0) => {\n  const {data} = await portfolioApi.get<Customer[]>('/customer', {\n    params: {\n      city: city_id,\n      page: page\n    }\n  });\n  console.log(data);\n  return data;\n};\n\nexport const createCustomer = async (customer: CustomerDTO) => {\n  const {status, data} = await portfolioApi.post('/customer', customer);\n  return {status, data};\n};\n\nexport const updateCustomer = async (customer: Customer) => {\n  const {status, data} = await portfolioApi.patch('/customer', customer);\n  return {status, data};\n};\n","import React from 'react';\nimport {Link} from 'react-router-dom';\n\nexport const BackArrow = ({to}: {to: string}) => (\n  <Link to={to}>\n    <small className=\"text-indigo-400\"> &larr; voltar </small> &nbsp;\n  </Link>\n);\n","import { City, Company } from 'portfolio-domain';\nimport { portfolioApi } from './config';\n\nexport const getAllCities = async () => {\n  const {data} = await portfolioApi.get<City[]>('/city');\n  return data;\n};\n\nexport const getAllCompanies = async () => {\n  const {data} = await portfolioApi.get<Company[]>('/company');\n  return data;\n};\n","import React from 'react';\nimport { useCreateCustomer } from 'hooks/create-customer';\nimport { BackArrow } from '../components/BackArrow';\n\nconst CreateCustomer = () => {\n  const {\n    customer,\n    alterField,\n    cities,\n    companies,\n    error,\n    create } = useCreateCustomer();\n  return (\n    <>\n      <h2>\n        <BackArrow to={'/'}/>\n        Criar cliente\n      </h2>\n      <div className=\"px-2 mx-auto mb-10 max-w-sm\">\n        <form action=\"/customer\" method=\"post\" className=\"grid grid-flow-row\" onSubmit={()=>false}>\n          <div data-testid=\"first_name-container\">\n            <label htmlFor=\"first_name\">Primeiro nome:</label>\n            <input\n              type=\"text\"\n              name=\"first_name\"\n              id=\"first_name\"\n              defaultValue={customer.first_name}\n              onChange={alterField}\n            />\n          </div>\n          <div data-testid=\"last_name-container\">\n            <label htmlFor=\"last_name\">Segundo nome:</label>\n            <input\n              type=\"text\"\n              name=\"last_name\"\n              id=\"last_name\"\n              defaultValue={customer.last_name}\n              onChange={alterField}\n            />\n          </div>\n          <div data-testid=\"email-container\">\n            <label htmlFor=\"email\">E-mail:</label>\n            <input\n              type=\"text\"\n              name=\"email\"\n              id=\"email\"\n              defaultValue={customer.email}\n              onChange={alterField}\n            />\n          </div>\n          <div data-testid=\"city-container\">\n            <label htmlFor=\"city\">Cidade: </label>\n            <select onChange={alterField} name=\"city\" id=\"city\">\n              <option value=\"0\">Selecione uma cidade</option>\n              {cities.map(i=>(\n                <option key={i.id} value={i.id}>{i.name}</option>\n              ))}\n            </select>\n          </div>\n          <div data-testid=\"company-container\">\n            <label htmlFor=\"company\">Empresa: </label>\n            <select\n              onChange={alterField}\n              defaultValue={customer.company}\n              name=\"company\"\n              id=\"company\"\n            >\n              <option value=\"0\">Selecione uma empresa</option>\n              {companies.map(i=>(\n                <option key={i.id} value={i.id}>{i.name}</option>\n              ))}\n            </select>\n          </div>\n          <div data-testid=\"titulation-container\">\n            <label htmlFor=\"titulation\">Titulação:</label>\n            <input\n              type=\"text\"\n              name=\"titulation\"\n              id=\"titulation\"\n              defaultValue={customer.titulation}\n              onChange={alterField}\n            />\n          </div>\n          <div data-testid=\"gender-container\">\n            <label htmlFor=\"gender\">Gênero:</label>\n            <div className=\"flex flex-col\">\n              <label htmlFor=\"male\">\n                <input\n                  type=\"radio\"\n                  name=\"gender\"\n                  id=\"male\"\n                  onChange={alterField}\n                  value=\"male\"\n                />&nbsp;\n                Masculino\n              </label>\n              <label htmlFor=\"female\">\n                <input\n                  type=\"radio\"\n                  name=\"gender\"\n                  id=\"female\"\n                  onChange={alterField}\n                  value=\"female\"\n                />&nbsp;\n                Feminino\n              </label>\n              <label htmlFor=\"uninformed\">\n                <input\n                  type=\"radio\"\n                  name=\"gender\"\n                  id=\"uninformed\"\n                  onChange={alterField}\n                  value=\"uninformed\"\n                />&nbsp;\n                Não informar\n              </label>\n            </div>\n          </div>\n          <div className=\"p-2 bg-red-200 border-red-900 border-2\" hidden={error===null}>\n            <span className=\"text-black font-bold\">{error?.message||''}</span>\n          </div>\n          <div data-testid=\"submit-container\">\n            <button className=\"submit\" onClick={create} type=\"submit\">\n              Criar\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default CreateCustomer;\n","import { createCustomer } from 'api/customers-api';\nimport { getAllCities, getAllCompanies } from 'api/utils-api';\nimport { City, Company, CustomerDTO } from 'portfolio-domain';\nimport React, { useCallback, useEffect, useState } from 'react';\n\ntype Event = React.ChangeEvent<HTMLInputElement|HTMLSelectElement>;\n\nexport const useCreateCustomer = () => {\n  const [cities, setCities] = useState([] as City[]);\n  const [companies, setCompanies] = useState([] as Company[]);\n  const [customer, setCustomer] = useState({\n    city: 0,\n    company: 0\n  } as CustomerDTO);\n  const [error, setError] = useState(null as {message:string}|null);\n\n  const alterField = useCallback((e: Event) => {\n    const draft = {...customer} as Record<string, unknown>;\n    draft[e.target.name] = e.target.value;\n    setCustomer(draft as CustomerDTO);\n  }, [customer]);\n\n  useEffect(() => {\n    Promise.all([getAllCities(), getAllCompanies()])\n      .then(e=> {\n        setCities(e[0]);\n        setCompanies(e[1]);\n      })\n      .catch(console.error);\n  }, []);\n\n  const create = useCallback((e) => {\n    e.preventDefault();\n    createCustomer(customer)\n      .then(({status, data}) => {\n        if(status === 201) {\n          window.location.href = '/customers-api';\n          return;\n        }\n        setError(data);\n      })\n      .catch(e => {\n        if(/409/.test(e.message)) {\n          setError({\n            message: 'Costumer email already created!'\n          });\n        }\n      });\n  }, [customer]);\n\n  return {\n    alterField,\n    customer,\n    cities,\n    companies,\n    create,\n    error\n  };\n};\n"],"sourceRoot":""}